{
  "hash": "e9a891eeb40507b2a27eed1bfac34d12",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Visualizing Big 12 Basketball program performance\"\ndescription: \"Which teams have reigned supreme?\"\nauthor:\n  - name: Mickey Rafa\n    url: https://mrafa3.github.io/\ndate: 12-30-2022\ncategories: [R, \"#TidyTuesday\", area-plot, small-multiples] # self-defined categories\nimage: \"tt_2020_41_thumbnail.png\"\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n\neditor_options: \n  chunk_output_type: inline\n  \nexecute: \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n![Area plot showing Big 12 women's basketball programs and their regular season win percentage relative to the historical median percentage for programs over time (1982-2018). Years of data only available if team made the NCAA tournament in that year.](tt_2020_41.png){#fig-1}\n\n# 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse,\n    tidytuesdayR,\n    ggtext,\n    showtext,\n    janitor,   #for clean_names()\n    scales,\n    glue,\n    here\n)    \n\nfont_add_google('Lexend')\nshowtext_auto()\n```\n:::\n\n\n\n# 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntt_year <- 2020\ntt_week <- 41\n\ntuesdata <- tidytuesdayR::tt_load(tt_year, week = tt_week)\n\ntournament <- tuesdata$tournament\n```\n:::\n\n\n\n# 3. Examine the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntournament %>% \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 2,092\nColumns: 19\n$ year              <dbl> 1982, 1982, 1982, 1982, 1982, 1982, 1982, 1982, 1982…\n$ school            <chr> \"Arizona St.\", \"Auburn\", \"Cheyney\", \"Clemson\", \"Drak…\n$ seed              <dbl> 4, 7, 2, 5, 4, 6, 5, 8, 7, 7, 4, 8, 2, 1, 1, 2, 3, 6…\n$ conference        <chr> \"Western Collegiate\", \"Southeastern\", \"Independent\",…\n$ conf_w            <dbl> NA, NA, NA, 6, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ conf_l            <dbl> NA, NA, NA, 3, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ conf_percent      <dbl> NA, NA, NA, 66.7, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n$ conf_place        <chr> \"-\", \"-\", \"-\", \"4th\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", …\n$ reg_w             <dbl> 23, 24, 24, 20, 26, 19, 21, 14, 21, 28, 24, 17, 22, …\n$ reg_l             <dbl> 6, 4, 2, 11, 6, 7, 8, 10, 8, 7, 5, 13, 7, 5, 1, 6, 4…\n$ reg_percent       <dbl> 79.3, 85.7, 92.3, 64.5, 81.3, 73.1, 72.4, 58.3, 72.4…\n$ how_qual          <chr> \"at-large\", \"at-large\", \"at-large\", \"at-large\", \"aut…\n$ x1st_game_at_home <chr> \"Y\", \"N\", \"Y\", \"N\", \"Y\", \"N\", \"N\", \"N\", \"N\", \"N\", \"Y…\n$ tourney_w         <dbl> 1, 0, 4, 0, 2, 0, 0, 0, 0, 0, 2, 0, 2, 1, 5, 3, 1, 1…\n$ tourney_l         <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1…\n$ tourney_finish    <chr> \"RSF\", \"1st\", \"N2nd\", \"1st\", \"RF\", \"1st\", \"1st\", \"1s…\n$ full_w            <dbl> 24, 24, 28, 20, 28, 19, 21, 14, 21, 28, 26, 17, 24, …\n$ full_l            <dbl> 7, 5, 3, 12, 7, 8, 9, 11, 9, 8, 6, 14, 8, 6, 1, 7, 5…\n$ full_percent      <dbl> 77.4, 82.8, 90.3, 62.5, 80.0, 70.4, 70.0, 56.0, 70.0…\n```\n\n\n:::\n:::\n\n\n\n# 4. Tidy the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntournament <- tournament %>% \n  mutate(median_w_l = median(reg_percent, na.rm = TRUE)) %>% \n  mutate(above_below_median = ifelse(reg_percent > median_w_l, \n                                     reg_percent, median_w_l))\n```\n:::\n\n\n\n# 5. Visualization Parameters \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_theme <- theme(\n  # choose font family\n  text = element_text(family = 'Lexend', color='black', size=14), \n  plot.background = element_rect(color='white'),\n  panel.background =  element_blank(), \n  axis.ticks = element_blank(), \n  panel.border = element_blank(), \n  legend.position = 'none',\n  strip.background = element_blank())\n```\n:::\n\n\n\n# 6. Plot \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbig12_viz <- tournament %>% \n  filter(conference == 'Big 12',\n         !school %in% c('Colorado', 'Missouri', 'Nebraska', 'Texas A&M')) %>% \n  ggplot(.,\n         aes(x=year,\n             y=reg_percent/100)) + \n  geom_line() + \n  geom_hline(yintercept = tournament$median_w_l[1]/100) + \n  geom_ribbon(aes(ymin=median_w_l/100, ymax=full_percent/100), \n              fill='firebrick1') + \n  geom_ribbon(aes(ymin=median_w_l/100, ymax=above_below_median/100), \n              fill='springgreen3') + \n  facet_wrap(~ school) + \n  ggtitle(\"Baylor has dominated the Big 12\",\n          subtitle = \"Plot compares season-by-season win percentage of Big 12 programs in the regular season compared with the historical median win percentage of all programs in women's basketball<br>\") + \n  labs(x='Year',\n       y='',\n       # y='Win % by season compared to\\nhistorical median for all programs\\n',\n       caption='Tidy Tuesday Week 41 (2020)<br>**Source**: FiveThirtyEight') + \n  scale_y_continuous(labels = percent) + \n  my_theme + \n  theme(plot.title = element_textbox(size=rel(3), face='bold'),\n        plot.subtitle = element_textbox_simple(size=rel(1.1), lineheight=.3),\n        plot.caption = element_textbox(lineheight=.3), \n        strip.text = element_textbox(size=rel(1.1), face='bold'))\n```\n:::\n\n\n\n# 7. Save \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the plot as PNG\nggsave(\n  filename = glue(\"tt_{tt_year}_{tt_week}.png\"),\n  plot = big12_viz,\n  width = 4, height = 3, units = \"in\", dpi = 320\n)\n\n# make thumbnail for page\nmagick::image_read(glue(\"tt_{tt_year}_{tt_week}.png\")) %>%\n  magick::image_resize(geometry = \"400\") %>%\n  magick::image_write(glue(\"tt_{tt_year}_{tt_week}_thumbnail.png\"))\n```\n:::\n\n\n\n# 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.0 (2024-04-24)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sonoma 14.6.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: America/Denver\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] here_1.0.1         glue_1.8.0         scales_1.3.0       janitor_2.2.0     \n [5] showtext_0.9-7     showtextdb_3.0     sysfonts_0.8.9     ggtext_0.1.2      \n [9] tidytuesdayR_1.1.2 lubridate_1.9.3    forcats_1.0.0      stringr_1.5.1     \n[13] dplyr_1.1.4        purrr_1.0.2        readr_2.1.5        tidyr_1.3.1       \n[17] tibble_3.2.1       ggplot2_3.5.1      tidyverse_2.0.0    pacman_0.5.1      \n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.5      xfun_0.48         httr2_1.0.5       htmlwidgets_1.6.4\n [5] gh_1.4.1          tzdb_0.4.0        vctrs_0.6.5       tools_4.4.0      \n [9] generics_0.1.3    curl_5.2.3        parallel_4.4.0    fansi_1.0.6      \n[13] pkgconfig_2.0.3   lifecycle_1.0.4   farver_2.1.2      compiler_4.4.0   \n[17] textshaping_0.4.0 munsell_0.5.1     snakecase_0.11.1  htmltools_0.5.8.1\n[21] yaml_2.3.10       pillar_1.9.0      crayon_1.5.3      magick_2.8.5     \n[25] commonmark_1.9.2  tidyselect_1.2.1  digest_0.6.37     stringi_1.8.4    \n[29] labeling_0.4.3    rprojroot_2.0.4   fastmap_1.2.0     grid_4.4.0       \n[33] colorspace_2.1-1  cli_3.6.3         magrittr_2.0.3    utf8_1.2.4       \n[37] withr_3.0.1       rappdirs_0.3.3    bit64_4.5.2       timechange_0.3.0 \n[41] rmarkdown_2.28    gitcreds_0.1.2    bit_4.5.0         ragg_1.3.3       \n[45] hms_1.1.3         evaluate_1.0.1    knitr_1.48        markdown_1.13    \n[49] rlang_1.1.4       gridtext_0.1.5    Rcpp_1.0.13       xml2_1.3.6       \n[53] rstudioapi_0.17.1 vroom_1.6.5       jsonlite_1.8.9    R6_2.5.1         \n[57] systemfonts_1.1.0\n```\n\n\n:::\n:::\n\n\n:::\n\n# 9. Github Repository \n\n::: {.callout-tip collapse=\"true\"}\n\n##### Expand for GitHub Repo\n \n[Access the GitHub repository here](https://github.com/mrafa3/mrafa3.github.io)\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}