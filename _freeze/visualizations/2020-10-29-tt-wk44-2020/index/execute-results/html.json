{
  "hash": "ed243b1be6a3ddebf14d799639844ba3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Visualizing the expansion of wind turbine projects in Canada over time\"\ndescription: \"Showing the major expansion in wind projects in Canada in the 2010s\"\nauthor:\n  - name: Mickey Rafa\n    url: https://mrafa3.github.io/\ndate: 10-29-2020\ncategories: [R, \"#TidyTuesday\", line-chart] # self-defined categories\nimage: \"tt_2020_44_thumbnail.png\"\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n\neditor_options: \n  chunk_output_type: inline\n  \nexecute: \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n![Line plot of wind turbine projects commissioned in Canadian provinces from 1993-2019. Ontario, Quebec, and Alberta are highlighted as having the largest number of commissioned projects in this period. Source: Government of Canada.](tt_2020_44.png){#fig-1}\n\n# 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse,\n    tidytuesdayR,\n    dlookr,\n    ggtext,\n    gt,\n    gtExtras,  #for font awesome icons in gt tables\n    ggbump,\n    showtext,\n    janitor,   #for clean_names()\n    scales,\n    htmltools, #for tagList()\n    glue,\n    here,\n    geomtextpath\n)    \n\nfont_add_google(\"Lato\")\n```\n:::\n\n\n\n# 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntt_year <- 2020\ntt_week <- 44\n\ntuesdata <- tidytuesdayR::tt_load(tt_year, week = tt_week)\n\nturbines <- tuesdata$`wind-turbine`\n```\n:::\n\n\n\n# 3. Examine the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nturbines %>% \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 6,698\nColumns: 15\n$ objectid                   <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, …\n$ province_territory         <chr> \"Alberta\", \"Alberta\", \"Alberta\", \"Alberta\",…\n$ project_name               <chr> \"Optimist Wind Energy\", \"Castle River Wind …\n$ total_project_capacity_mw  <dbl> 0.90, 44.00, 3.78, 3.78, 3.78, 3.78, 19.50,…\n$ turbine_identifier         <chr> \"OWE1\", \"CRW1\", \"WWT1\", \"WWT2\", \"WWT3\", \"WW…\n$ turbine_number_in_project  <chr> \"1/2\", \"1/60\", \"1/6\", \"2/6\", \"3/6\", \"4/6\", …\n$ turbine_rated_capacity_k_w <dbl> 150, 600, 600, 600, 600, 660, 1300, 1300, 1…\n$ rotor_diameter_m           <dbl> 23, 44, 44, 44, 44, 47, 60, 60, 60, 60, 60,…\n$ hub_height_m               <dbl> 30, 40, 50, 50, 50, 50, 46, 46, 46, 46, 46,…\n$ manufacturer               <chr> \"Bonus\", \"Vestas\", \"Vestas\", \"Vestas\", \"Ves…\n$ model                      <chr> \"AN 150/30\", \"V44/600\", \"V44/600\", \"V44/600…\n$ commissioning_date         <chr> \"1993\", \"1997\", \"1998\", \"1998\", \"1998\", \"20…\n$ latitude                   <dbl> 49.52535, 49.51264, 49.23307, 49.23303, 49.…\n$ longitude                  <dbl> -114.0548, -114.0357, -113.6549, -113.6302,…\n$ notes                      <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n```\n\n\n:::\n\n```{.r .cell-code}\nturbines %>% \n  summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    objectid    province_territory project_name       total_project_capacity_mw\n Min.   :   1   Length:6698        Length:6698        Min.   :  0.3            \n 1st Qu.:1675   Class :character   Class :character   1st Qu.: 70.5            \n Median :3350   Mode  :character   Mode  :character   Median :102.0            \n Mean   :3350                                         Mean   :134.8            \n 3rd Qu.:5024                                         3rd Qu.:181.5            \n Max.   :6698                                         Max.   :350.0            \n                                                                               \n turbine_identifier turbine_number_in_project turbine_rated_capacity_k_w\n Length:6698        Length:6698               Min.   :  65              \n Class :character   Class :character          1st Qu.:1600              \n Mode  :character   Mode  :character          Median :1880              \n                                              Mean   :1967              \n                                              3rd Qu.:2300              \n                                              Max.   :3750              \n                                              NA's   :220               \n rotor_diameter_m  hub_height_m    manufacturer          model          \n Min.   : 15.00   Min.   : 24.50   Length:6698        Length:6698       \n 1st Qu.: 80.00   1st Qu.: 80.00   Class :character   Class :character  \n Median : 90.00   Median : 80.00   Mode  :character   Mode  :character  \n Mean   : 88.62   Mean   : 83.34                                        \n 3rd Qu.:100.00   3rd Qu.: 92.00                                        \n Max.   :141.00   Max.   :132.00                                        \n                                                                        \n commissioning_date    latitude       longitude          notes          \n Length:6698        Min.   :42.00   Min.   :-135.23   Length:6698       \n Class :character   1st Qu.:43.98   1st Qu.: -84.41   Class :character  \n Mode  :character   Median :46.67   Median : -80.67   Mode  :character  \n                    Mean   :46.76   Mean   : -83.03                     \n                    3rd Qu.:49.17   3rd Qu.: -67.85                     \n                    Max.   :64.49   Max.   : -52.97                     \n                                                                        \n```\n\n\n:::\n:::\n\n\n\n# 4. Tidy the Data \n\nIf I did some tidying of `commissioning_date`, we could do a running total plot of turbine projects by province (some, for instance, have \"2001/2002\").\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nturbines %>% \n  distinct(commissioning_date)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 35 × 1\n   commissioning_date\n   <chr>             \n 1 1993              \n 2 1997              \n 3 1998              \n 4 2000              \n 5 2001              \n 6 2002              \n 7 2003              \n 8 2004              \n 9 2006              \n10 2007              \n# ℹ 25 more rows\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nturbines <- turbines %>% \n  mutate(year = substring(commissioning_date, regexpr(\"/\", commissioning_date) + 1,\n                          nchar(commissioning_date))) %>% \n  mutate(year = as.numeric(substring(year, regexpr(\"/\", year) + 1, nchar(year))))\n\nturbines_cum_sum <- turbines %>%  \n  group_by(province_territory, year) %>% \n  summarise(count_new_turbines = n(), .groups='drop_last') %>% \n  mutate(running_total_new_turbines = cumsum(count_new_turbines),\n         highlight_prov = ifelse(province_territory %in% \n                                   c('Ontario', 'Quebec', 'Alberta'),\n                                 as.character(province_territory), 'Other'))\n```\n:::\n\n\n\n# 5. Visualization Parameters \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_theme <- theme(\n  text = element_text(family = 'Lato', size=18), \n  axis.ticks = element_blank(), \n  plot.background = element_rect(color='white'),\n  # plot.background = element_blank(),\n  panel.background =  element_blank(), \n  legend.position = 'none',\n  panel.grid.major = element_line(colour = \"grey90\", linewidth = 0.25),\n  panel.grid.minor = element_line(colour = \"grey93\", linewidth = 0.25),\n  panel.border = element_blank())\n\nprov_cols <- c('Ontario' = 'steelblue4',\n               'Quebec' = 'springgreen4',\n               'Alberta' = 'gold3',\n               'Other' = 'gray70')\n\nprov_size <- c('Ontario' = 1.25,\n               'Quebec' = 1.25,\n               'Alberta' = 1.25,\n               'Other' = .9)\n```\n:::\n\n\n\n# 6. Plot \n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrunning_ttl_viz <- turbines_cum_sum %>% \n  ggplot(.,\n         aes(x=year,\n             y=running_total_new_turbines)) + \n  geom_line(aes(group=province_territory,\n                color=highlight_prov),\n                linewidth=1) + \n  geom_text(data=. %>% \n              slice_max(year) %>% \n              filter(province_territory %in% c('Ontario', 'Quebec', 'Alberta')),\n            aes(x=year + 1.5,\n                label=province_territory,\n                color=highlight_prov), fontface='bold', size=10) + \n  labs(x='',\n       y='**Running total of<br>new turbines**',\n       title='Running total of wind turbines in Canadian provinces over time',\n       subtitle=glue(\"<span style='color:steelblue4'>**Ontario**</span>, <span style='color:springgreen4'>**Quebec**</span>, and <span style='color:gold3'>**Alberta**</span>  lead the way for Canadian provinces. This graphic is measuring the count of turbines<br>commissioned by provinces over time and does not consider the generating capacity of each wind turbine or their<br>decay over time. The gray lines represent other Canadian provinces that have far fewer turbines.\"),\n       caption='<br>Tidy Tuesday Week 44 (2020)<br>**Source**: Government of Canada<br>Created by @mickey_rafa') + \n  scale_y_continuous(labels = comma) + \n  scale_color_manual(values = prov_cols) + \n  my_theme + \n  theme(axis.title.y = element_text(size=rel(1.2), \n                                    angle = 0, margin = margin(b=5), lineheight = .5),\n        plot.title = element_markdown(size=rel(2.6), face='bold'),\n        plot.subtitle = element_textbox(size=rel(1.4), lineheight = .5),\n        axis.title = element_textbox(size=rel(1.3)),\n        axis.text = element_text(size=rel(1.5)),\n        plot.caption = element_textbox(size=rel(1.3), margin = margin(b=5), lineheight = .5))\n```\n:::\n\n\n\n# 7. Save \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the plot as PNG\nggsave(\n  filename = glue(\"tt_{tt_year}_{tt_week}.png\"),\n  plot = running_ttl_viz,\n  width = 7.5, height = 5, units = \"in\", dpi = 300\n)\n\n# make thumbnail for page\nmagick::image_read(glue(\"tt_{tt_year}_{tt_week}.png\")) %>%\n  magick::image_resize(geometry = \"400\") %>%\n  magick::image_write(glue(\"tt_{tt_year}_{tt_week}_thumbnail.png\"))\n```\n:::\n\n\n\n# 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.0 (2024-04-24)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sonoma 14.6.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: America/Denver\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] geomtextpath_0.1.4 here_1.0.1         glue_1.8.0         htmltools_0.5.8.1 \n [5] scales_1.3.0       janitor_2.2.0      showtext_0.9-7     showtextdb_3.0    \n [9] sysfonts_0.8.9     ggbump_0.1.0       gtExtras_0.5.0     gt_0.11.1         \n[13] ggtext_0.1.2       dlookr_0.6.3       tidytuesdayR_1.1.2 lubridate_1.9.3   \n[17] forcats_1.0.0      stringr_1.5.1      dplyr_1.1.4        purrr_1.0.2       \n[21] readr_2.1.5        tidyr_1.3.1        tibble_3.2.1       ggplot2_3.5.1     \n[25] tidyverse_2.0.0    pacman_0.5.1      \n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.1        viridisLite_0.4.2       farver_2.1.2           \n [4] fastmap_1.2.0           gh_1.4.1                pagedown_0.21          \n [7] fontquiver_0.2.1        promises_1.3.0          digest_0.6.37          \n[10] timechange_0.3.0        mime_0.12               lifecycle_1.0.4        \n[13] magrittr_2.0.3          compiler_4.4.0          rlang_1.1.4            \n[16] tools_4.4.0             utf8_1.2.4              yaml_2.3.10            \n[19] knitr_1.48              labeling_0.4.3          htmlwidgets_1.6.4      \n[22] bit_4.5.0               curl_5.2.3              xml2_1.3.6             \n[25] withr_3.0.1             grid_4.4.0              fansi_1.0.6            \n[28] gdtools_0.4.0           xtable_1.8-4            colorspace_2.1-1       \n[31] extrafontdb_1.0         paletteer_1.6.0         gitcreds_0.1.2         \n[34] cli_3.6.3               crayon_1.5.3            rmarkdown_2.28         \n[37] ragg_1.3.3              generics_0.1.3          rstudioapi_0.17.1      \n[40] tzdb_0.4.0              commonmark_1.9.2        parallel_4.4.0         \n[43] vctrs_0.6.5             jsonlite_1.8.9          fontBitstreamVera_0.1.1\n[46] hms_1.1.3               bit64_4.5.2             magick_2.8.5           \n[49] systemfonts_1.1.0       fontawesome_0.5.2       rematch2_2.1.2         \n[52] stringi_1.8.4           gtable_0.3.5            later_1.3.2            \n[55] extrafont_0.19          munsell_0.5.1           pillar_1.9.0           \n[58] rappdirs_0.3.3          reactable_0.4.4         R6_2.5.1               \n[61] httr2_1.0.5             textshaping_0.4.0       rprojroot_2.0.4        \n[64] vroom_1.6.5             evaluate_1.0.1          shiny_1.9.1            \n[67] kableExtra_1.4.0        markdown_1.13           gridtext_0.1.5         \n[70] snakecase_0.11.1        fontLiberation_0.1.0    httpuv_1.6.15          \n[73] hrbrthemes_0.8.7        Rcpp_1.0.13             svglite_2.1.3          \n[76] gridExtra_2.3           Rttf2pt1_1.3.12         xfun_0.48              \n[79] pkgconfig_2.0.3        \n```\n\n\n:::\n:::\n\n\n:::\n\n# 9. Github Repository \n\n::: {.callout-tip collapse=\"true\"}\n\n##### Expand for GitHub Repo\n \n[Access the GitHub repository here](https://github.com/mrafa3/mrafa3.github.io)\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}