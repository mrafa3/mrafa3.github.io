{
  "hash": "75142a8513e7ed9fe0a24703619001b5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Analyzing size distributions in the Palmer Penguins dataset\"\n# description: \"Visualizing distributions with some alternative chart types\"\nauthor:\n  - name: Mickey Rafa\n    url: https://mrafa3.github.io/\ndate: 09-25-2020\ncategories: [R, \"#TidyTuesday\", ternary-plot, ridge-plot] # self-defined categories\nimage: \"tt_2020_31_ternary_thumbnail.png\"\ndraft: true # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n\neditor_options: \n  chunk_output_type: inline\n  \nexecute: \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n![Ternary plot that shows the distribution of the palmer penguins species by bill length, body mass, and flipper length. This illustrates that flipper length is a distinguishing feature, as shown along the horizontal axis, where Adelie's tend to have smaller flippers, while Gentoo's tend to have larger flippers.](tt_2020_31_ternary.png){#fig-1}\n\n![Ridge plot illustrating the distribution of body mass (in g) by the three islands in the dataset: Torgersen, Dream, and Briscoe. Briscoe island is home to larger penguins than the other islands in the dataset.](tt_2020_31_ridge.png){#fig-2}\n\n# 1. Load Packages & Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse,\n    tidytuesdayR,\n    dlookr,\n    ggtext,\n    gt,\n    gtExtras,  #for font awesome icons in gt tables\n    ggbump,\n    showtext,\n    janitor,   #for clean_names()\n    scales,\n    htmltools, #for tagList()\n    glue,\n    here,\n    ggridges,\n    ggtern,\n    geomtextpath\n)    \n\nfont_add_google(\"Lato\")\n```\n:::\n\n\n\n# 2. Read in the Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntt_year <- 2020\ntt_week <- 31\n\ntuesdata <- tidytuesdayR::tt_load(tt_year, week = tt_week)\n\npenguins <- tuesdata$penguins\n```\n:::\n\n\n\n# 3. Examine the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 344\nColumns: 8\n$ species           <chr> \"Adelie\", \"Adelie\", \"Adelie\", \"Adelie\", \"Adelie\", \"A…\n$ island            <chr> \"Torgersen\", \"Torgersen\", \"Torgersen\", \"Torgersen\", …\n$ bill_length_mm    <dbl> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …\n$ bill_depth_mm     <dbl> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …\n$ flipper_length_mm <dbl> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…\n$ body_mass_g       <dbl> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …\n$ sex               <chr> \"male\", \"female\", \"female\", NA, \"female\", \"male\", \"f…\n$ year              <dbl> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…\n```\n\n\n:::\n\n```{.r .cell-code}\npenguins %>% \n  summary()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   species             island          bill_length_mm  bill_depth_mm  \n Length:344         Length:344         Min.   :32.10   Min.   :13.10  \n Class :character   Class :character   1st Qu.:39.23   1st Qu.:15.60  \n Mode  :character   Mode  :character   Median :44.45   Median :17.30  \n                                       Mean   :43.92   Mean   :17.15  \n                                       3rd Qu.:48.50   3rd Qu.:18.70  \n                                       Max.   :59.60   Max.   :21.50  \n                                       NA's   :2       NA's   :2      \n flipper_length_mm  body_mass_g       sex                 year     \n Min.   :172.0     Min.   :2700   Length:344         Min.   :2007  \n 1st Qu.:190.0     1st Qu.:3550   Class :character   1st Qu.:2007  \n Median :197.0     Median :4050   Mode  :character   Median :2008  \n Mean   :200.9     Mean   :4202                      Mean   :2008  \n 3rd Qu.:213.0     3rd Qu.:4750                      3rd Qu.:2009  \n Max.   :231.0     Max.   :6300                      Max.   :2009  \n NA's   :2         NA's   :2                                       \n```\n\n\n:::\n:::\n\n\n\n# 4. Tidy the Data \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins_scale <- penguins %>% \n  mutate_if(is.numeric, scale) %>% \n  summarise_if(is.double, list(min, max), na.rm=TRUE)\n\npenguins_complete <- penguins %>% \n  filter(complete.cases(.))\n```\n:::\n\n\n\n# 5. Visualization Parameters \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_theme <- theme(\n  text = element_text(family = 'Lato', size = 14), \n  axis.ticks = element_blank(), \n  plot.background = element_blank(),\n  panel.background =  element_blank(), \n  legend.background = element_blank(), \n  panel.grid.major = element_line(colour = \"grey90\", linewidth = 0.5),\n  panel.grid.minor = element_line(colour = \"grey93\", linewidth = 0.5),\n  panel.border = element_blank(), \n  legend.title=element_blank(), \n  legend.position = 'top')\n\npeng_cols <- c('Biscoe' = 'cornflowerblue', \n                 'Dream' = 'seagreen3',\n                 'Torgersen' = 'maroon1',\n                 #SPECIES\n                 'Adelie' = 'cornflowerblue', \n                 'Chinstrap' = 'seagreen3',\n                 'Gentoo' = 'maroon1')\n```\n:::\n\n\n\n# 6. Plot \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npen_mass_by_island_ridgeplot_viz <- penguins_complete %>% \n  ggplot(.) + \n  ggridges::geom_density_ridges2(aes(x=body_mass_g,\n                                    y=island,\n                                    fill=island),\n                                color='black',\n                                bandwidth=195)  + \n  labs(x='\\nBody mass (g)',\n       y='',\n       title = 'Distribution of the body mass of penguins on the Palmer Archipeligo',\n       subtitle = glue(\n      \"on <span style='color:maroon1'>**Torgersen**</span>, <span style='color:seagreen3'>**Dream**</span>, and <span style='color:cornflowerblue'>**Briscoe**</span> islands\"\n    ),\n       caption = 'Tidy Tuesday Week 31 (2020)<br>**Source**: palmerpenguins::') + \n  scale_x_continuous(labels = comma) + \n  scale_fill_manual(values = peng_cols) + \n  my_theme + \n  theme(legend.position = 'none',\n        axis.text.y = element_blank(),\n        plot.title = element_text(face='bold', size=rel(1.5)), \n        plot.subtitle = element_textbox(),\n        plot.caption = element_textbox())\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npenguin_ternary_viz <- penguins_complete %>% \n  ggtern(aes(x = scale(bill_length_mm), \n               y = scale(body_mass_g), \n               z = scale(flipper_length_mm),\n               color=species, fill=species)) + \n  geom_point(aes(fill=species), \n             shape = 21, \n             size = 3,\n             alpha = .5) + \n  scale_color_manual(values = peng_cols) + \n  scale_fill_manual(values = peng_cols) + \n  labs(title = 'Relationship between bill length, body mass, and flipper length',\n       subtitle = glue(\n      \"for <span style='color:maroon1'>**Gentoo**</span>, <span style='color:seagreen3'>**Chinstrap**</span>, and <span style='color:cornflowerblue'>**Adelie**</span> penguins\"\n    ),\n       x='', y='', z='') + \n  Larrowlab(\"Bill length (0-100 scaled)\\n\") + \n  Tarrowlab(\"Body mass (0-100 scaled)\\n\") + \n  Rarrowlab(\"\\nFlipper length (0-100 scaled)\") + \n  my_theme + \n  theme(tern.axis.arrow.show = TRUE, \n        plot.title = element_text(face='bold', size=rel(1.5), lineheight = 1.5), \n        tern.axis.text = element_text(size = rel(1.5)),\n        legend.position = 'none',\n        plot.subtitle = element_textbox(),\n        plot.caption = element_textbox())\n```\n:::\n\n\n\n# 7. Save \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# RIDGEPLOT\nggsave(\n  filename = glue(\"tt_{tt_year}_{tt_week}_ridge.png\"),\n  plot = pen_mass_by_island_ridgeplot_viz,\n  width = 10, height = 6, units = \"in\", dpi = 320\n)\n\n# make thumbnail for page\nmagick::image_read(glue(\"tt_{tt_year}_{tt_week}_ridge.png\")) %>%\n  magick::image_resize(geometry = \"400\") %>%\n  magick::image_write(glue(\"tt_{tt_year}_{tt_week}_ridge_thumbnail.png\"))\n\n# TERNARY\nggsave(\n  filename = glue(\"tt_{tt_year}_{tt_week}_ternary.png\"),\n  plot = penguin_ternary_viz,\n  width = 9, height = 9, units = \"in\", dpi = 320\n)\n\n# make thumbnail for page\nmagick::image_read(glue(\"tt_{tt_year}_{tt_week}_ternary.png\")) %>%\n  magick::image_resize(geometry = \"400\") %>%\n  magick::image_write(glue(\"tt_{tt_year}_{tt_week}_ternary_thumbnail.png\"))\n```\n:::\n\n\n\n# 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.0 (2024-04-24)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sonoma 14.6.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: America/Denver\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] geomtextpath_0.1.4 ggtern_3.5.0       ggridges_0.5.6     here_1.0.1        \n [5] glue_1.8.0         htmltools_0.5.8.1  scales_1.3.0       janitor_2.2.0     \n [9] showtext_0.9-7     showtextdb_3.0     sysfonts_0.8.9     ggbump_0.1.0      \n[13] gtExtras_0.5.0     gt_0.11.1          ggtext_0.1.2       dlookr_0.6.3      \n[17] tidytuesdayR_1.1.2 lubridate_1.9.3    forcats_1.0.0      stringr_1.5.1     \n[21] dplyr_1.1.4        purrr_1.0.2        readr_2.1.5        tidyr_1.3.1       \n[25] tibble_3.2.1       ggplot2_3.5.1      tidyverse_2.0.0    pacman_0.5.1      \n\nloaded via a namespace (and not attached):\n [1] gridExtra_2.3           httr2_1.0.5             rematch2_2.1.2         \n [4] rlang_1.1.4             magrittr_2.0.3          hrbrthemes_0.8.7       \n [7] snakecase_0.11.1        compiler_4.4.0          systemfonts_1.1.0      \n[10] vctrs_0.6.5             crayon_1.5.3            pkgconfig_2.0.3        \n[13] fastmap_1.2.0           magick_2.8.5            labeling_0.4.3         \n[16] fontawesome_0.5.2       utf8_1.2.4              promises_1.3.0         \n[19] rmarkdown_2.28          markdown_1.13           tzdb_0.4.0             \n[22] bit_4.5.0               xfun_0.48               jsonlite_1.8.9         \n[25] later_1.3.2             parallel_4.4.0          R6_2.5.1               \n[28] stringi_1.8.4           pagedown_0.21           compositions_2.0-8     \n[31] extrafontdb_1.0         Rcpp_1.0.13             knitr_1.48             \n[34] extrafont_0.19          gitcreds_0.1.2          httpuv_1.6.15          \n[37] timechange_0.3.0        tidyselect_1.2.1        rstudioapi_0.17.1      \n[40] yaml_2.3.10             curl_5.2.3              lattice_0.22-6         \n[43] plyr_1.8.9              shiny_1.9.1             withr_3.0.1            \n[46] evaluate_1.0.1          bayesm_3.1-6            xml2_1.3.6             \n[49] pillar_1.9.0            tensorA_0.36.2.1        generics_0.1.3         \n[52] vroom_1.6.5             rprojroot_2.0.4         paletteer_1.6.0        \n[55] hms_1.1.3               commonmark_1.9.2        munsell_0.5.1          \n[58] xtable_1.8-4            gdtools_0.4.0           tools_4.4.0            \n[61] hexbin_1.28.4           robustbase_0.99-4-1     reactable_0.4.4        \n[64] grid_4.4.0              Rttf2pt1_1.3.12         gh_1.4.1               \n[67] colorspace_2.1-1        proto_1.0.0             cli_3.6.3              \n[70] latex2exp_0.9.6         rappdirs_0.3.3          kableExtra_1.4.0       \n[73] textshaping_0.4.0       fontBitstreamVera_0.1.1 fansi_1.0.6            \n[76] viridisLite_0.4.2       svglite_2.1.3           gtable_0.3.5           \n[79] DEoptimR_1.1-3          digest_0.6.37           fontquiver_0.2.1       \n[82] farver_2.1.2            htmlwidgets_1.6.4       lifecycle_1.0.4        \n[85] mime_0.12               bit64_4.5.2             fontLiberation_0.1.0   \n[88] gridtext_0.1.5          MASS_7.3-61            \n```\n\n\n:::\n:::\n\n\n:::\n\n# 9. Github Repository \n\n::: {.callout-tip collapse=\"true\"}\n\n##### Expand for GitHub Repo\n \n[Access the GitHub repository here](https://github.com/mrafa3/mrafa3.github.io)\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}