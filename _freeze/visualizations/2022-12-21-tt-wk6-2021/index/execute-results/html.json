{
  "hash": "921207d253be0a17b3c1291181704a02",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Visualizing enrollment in HBCUs by gender over time\"\ndescription: \"Women far outnumber men at HBCUs\"\nauthor:\n  - name: Mickey Rafa\n    url: https://mrafa3.github.io/\ndate: 12-21-2022\ncategories: [R, \"#TidyTuesday\", line-plot, ribbon-plot] # self-defined categories\nimage: \"tt_2021_6_thumbnail.png\"\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n\nformat:\n  html:\n    toc: true\n    toc-depth: 5\n    code-link: true\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show code\"\n    self-contained: true\n\neditor_options: \n  chunk_output_type: inline\n  \nexecute: \n  error: false\n  message: false\n  warning: false\n  eval: true\n---\n\n\n\n\n![Line plot showing the enrollment in Historically Black Colleges and Universities from 1976-2015. Women have historically enrolled at higher rates than men in these institutions, and that gap has grown over time. Source: Data.World.](tt_2021_6.png){#fig-1}\n\n# 1. Load Packages & Setup\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(\n    tidyverse,\n    tidytuesdayR,\n    dlookr,\n    ggtext,\n    gt,\n    gtExtras,  #for font awesome icons in gt tables\n    ggbump,\n    showtext,\n    janitor,   #for clean_names()\n    scales,\n    htmltools, #for tagList()\n    glue,\n    here,\n    geomtextpath\n)    \n\nfont_add('fa-reg', 'fonts/Font Awesome 6 Free-Regular-400.otf')\nfont_add('fa-brands', 'fonts/Font Awesome 6 Brands-Regular-400.otf')\nfont_add('fa-solid', 'fonts/Font Awesome 6 Free-Solid-900.otf')\n\nsysfonts::font_add_google(\"Ubuntu\",\"ubuntu\")\nshowtext::showtext_auto()\nshowtext::showtext_opts(dpi=300)\n```\n:::\n\n\n\n\n# 2. Read in the Data\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntt_year <- 2021\ntt_week <- 6\n\ntuesdata <- tidytuesdayR::tt_load(tt_year, week = tt_week)\n\nhbcu_all <- tuesdata$hbcu_all %>% clean_names()\n```\n:::\n\n\n\n\n# 3. Examine the Data \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbcu_all %>%\n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 32\nColumns: 12\n$ year             <dbl> 1976, 1980, 1982, 1984, 1986, 1988, 1990, 1991, 1992,…\n$ total_enrollment <dbl> 222613, 233557, 228371, 227519, 223275, 239755, 25715…\n$ males            <dbl> 104669, 106387, 104897, 102823, 97523, 100561, 105157…\n$ females          <dbl> 117944, 127170, 123474, 124696, 125752, 139194, 15199…\n$ x4_year          <dbl> 206676, 218009, 212017, 212844, 207231, 223250, 24049…\n$ x2_year          <dbl> 15937, 15548, 16354, 14675, 16044, 16505, 16655, 1724…\n$ total_public     <dbl> 156836, 168217, 165871, 164116, 162048, 173672, 18704…\n$ x4_year_public   <dbl> 143528, 155085, 151472, 151289, 147631, 158606, 17196…\n$ x2_year_public   <dbl> 13308, 13132, 14399, 12827, 14417, 15066, 15077, 1564…\n$ total_private    <dbl> 65777, 65340, 62500, 63403, 61227, 66083, 70106, 7148…\n$ x4_year_private  <dbl> 63148, 62924, 60545, 61555, 59600, 64644, 68528, 6988…\n$ x2_year_private  <dbl> 2629, 2416, 1955, 1848, 1627, 1439, 1578, 1599, 1629,…\n```\n\n\n:::\n\n```{.r .cell-code}\nhbcu_all %>%\n  diagnose()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 12 × 6\n   variables        types missing_count missing_percent unique_count unique_rate\n   <chr>            <chr>         <int>           <dbl>        <int>       <dbl>\n 1 year             nume…             0               0           32           1\n 2 total_enrollment nume…             0               0           32           1\n 3 males            nume…             0               0           32           1\n 4 females          nume…             0               0           32           1\n 5 x4_year          nume…             0               0           32           1\n 6 x2_year          nume…             0               0           32           1\n 7 total_public     nume…             0               0           32           1\n 8 x4_year_public   nume…             0               0           32           1\n 9 x2_year_public   nume…             0               0           32           1\n10 total_private    nume…             0               0           32           1\n11 x4_year_private  nume…             0               0           32           1\n12 x2_year_private  nume…             0               0           32           1\n```\n\n\n:::\n:::\n\n\n\n\n# 4. Tidy the Data \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhbcu_all <- hbcu_all %>% \n  select(year, males, females)\n  # gather(gender, annual_enrollment, 2:3)\n```\n:::\n\n\n\n\n# 5. Visualization Parameters \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_theme <- theme(text = element_text(family='ubuntu', size=12, color=\"#444444\"),\n  # plot.title = ggtext::element_textbox_simple(face=\"bold\", color=\"#444444\", size=24, margin=margin(b=5)),\n  # plot.subtitle = ggtext::element_textbox_simple(color=\"#444444\", size=14, \n  #                                                      margin=margin(b=10)),\n  # plot.caption = ggtext::element_textbox_simple(color=\"#444444\", size=12),\n  # axis.title = element_text(color=\"black\", face=\"bold\", size=12), \n  # axis.text = element_text(color=\"black\", size=18), \n  axis.ticks = element_blank(), \n  plot.background = element_rect(fill = 'white'),\n  panel.background = element_blank(),\n  panel.grid.major = element_blank(),\n  panel.grid.minor = element_blank(),\n  panel.border = element_blank(), \n  legend.title=element_blank())\n\nviz_colors <- c(\"Women\" = \"#663399\", \"Men\" = \"#33CC66\")\n\ntitle <- tagList(span(\"**Women**\", style='color:#663399;'), \"enrolling in HBCUs at historic rates\")\n\nsubtitle <- tagList(p(\"HBCU Enrollments by Gender: 1976 - 2015\"))\n  \ncaption <- paste0(\"<span style = 'color:#ffffff;'>.....</span>\",\n                  \"<span style='font-family:ubuntu;'>**Source**: TidyTuesday week 6 (2021)</span><br>\",\n                \"<span style = 'color:#ffffff;'>.....</span>\",\n                \"<span style='font-family:fa-brands;'>&#xf099;</span>\",\n                 \"<span style='font-family:ubuntu;'>@mickey.rafa</span>\",\n                 \"<span style='font-family:ubuntu;color:white;'>....</span>\",\n                 \"<span style='font-family:fa-brands;'>&#xf09b;</span>\",\n                 \"<span style='font-family:ubuntu;color:white;'>.</span>\",\n                 \"<span style='font-family:ubuntu;'>mrafa3</span>\")\n```\n:::\n\n\n\n\n# 6. Plot \n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nplot_enrollment <- hbcu_all %>% \n  ggplot(aes(x=year,\n             # y=annual_enrollment,\n             )) + \n  geom_ribbon(aes(ymin=males,\n                  ymax=females),\n              fill='gray90') + \n  geomtextpath::geom_textline(aes(y=males, color='Men'),\n                              label='Men', linewidth=1.2, vjust=1.2, fontface=\"bold\", size=8, text_smoothing=40) + \n  geomtextpath::geom_textline(aes(y=females, color='Women'),\n                              label='Women', linewidth=1.2, vjust=-.25, fontface=\"bold\", size=8, text_smoothing=40) +\n  labs(x='',\n       y='',\n       title=title,\n       subtitle = subtitle,\n       caption = caption) + \n  scale_color_manual(values = viz_colors) + \n  scale_y_continuous(labels = comma, position = 'right') + \n  my_theme + \n  theme(legend.position = 'none',\n        plot.title = element_textbox_simple(face=\"bold\", size=rel(2), margin=margin(b=5)),\n        plot.subtitle = element_textbox_simple(size=rel(1.2), margin=margin(b=10)),\n        plot.caption = element_textbox_simple(size=rel(1.2)),\n        axis.text = element_text(color=\"black\", size=rel(1.5)))\n```\n:::\n\n\n\n\n# 7. Save \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Save the plot as PNG\nggsave(\n  filename = glue(\"tt_{tt_year}_{tt_week}.png\"),\n  plot = plot_enrollment,\n  width = 11, height = 6, units = \"in\", dpi = 320\n)\n\n# make thumbnail for page\nmagick::image_read(glue(\"tt_{tt_year}_{tt_week}.png\")) %>%\n  magick::image_resize(geometry = \"400\") %>%\n  magick::image_write(glue(\"tt_{tt_year}_{tt_week}_thumbnail.png\"))\n```\n:::\n\n\n\n\n# 8. Session Info\n\n::: {.callout-tip collapse=\"true\"}\n##### Expand for Session Info\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.4.0 (2024-04-24)\nPlatform: aarch64-apple-darwin20\nRunning under: macOS Sonoma 14.6.1\n\nMatrix products: default\nBLAS:   /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRblas.0.dylib \nLAPACK: /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.12.0\n\nlocale:\n[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8\n\ntime zone: America/Denver\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] geomtextpath_0.1.4 here_1.0.1         glue_1.8.0         htmltools_0.5.8.1 \n [5] scales_1.3.0       janitor_2.2.0      showtext_0.9-7     showtextdb_3.0    \n [9] sysfonts_0.8.9     ggbump_0.1.0       gtExtras_0.5.0     gt_0.11.1         \n[13] ggtext_0.1.2       dlookr_0.6.3       tidytuesdayR_1.1.2 lubridate_1.9.3   \n[17] forcats_1.0.0      stringr_1.5.1      dplyr_1.1.4        purrr_1.0.2       \n[21] readr_2.1.5        tidyr_1.3.1        tibble_3.2.1       ggplot2_3.5.1     \n[25] tidyverse_2.0.0    pacman_0.5.1      \n\nloaded via a namespace (and not attached):\n [1] tidyselect_1.2.1        viridisLite_0.4.2       farver_2.1.2           \n [4] fastmap_1.2.0           gh_1.4.1                pagedown_0.21          \n [7] fontquiver_0.2.1        promises_1.3.0          digest_0.6.37          \n[10] timechange_0.3.0        mime_0.12               lifecycle_1.0.4        \n[13] magrittr_2.0.3          compiler_4.4.0          rlang_1.1.4            \n[16] tools_4.4.0             utf8_1.2.4              yaml_2.3.10            \n[19] knitr_1.48              labeling_0.4.3          htmlwidgets_1.6.4      \n[22] bit_4.5.0               curl_5.2.3              xml2_1.3.6             \n[25] withr_3.0.1             grid_4.4.0              fansi_1.0.6            \n[28] gdtools_0.4.0           xtable_1.8-4            colorspace_2.1-1       \n[31] extrafontdb_1.0         paletteer_1.6.0         gitcreds_0.1.2         \n[34] cli_3.6.3               crayon_1.5.3            rmarkdown_2.28         \n[37] ragg_1.3.3              generics_0.1.3          rstudioapi_0.17.1      \n[40] tzdb_0.4.0              commonmark_1.9.2        parallel_4.4.0         \n[43] vctrs_0.6.5             jsonlite_1.8.9          fontBitstreamVera_0.1.1\n[46] hms_1.1.3               bit64_4.5.2             magick_2.8.5           \n[49] systemfonts_1.1.0       fontawesome_0.5.2       rematch2_2.1.2         \n[52] stringi_1.8.4           gtable_0.3.5            later_1.3.2            \n[55] extrafont_0.19          munsell_0.5.1           pillar_1.9.0           \n[58] rappdirs_0.3.3          reactable_0.4.4         R6_2.5.1               \n[61] httr2_1.0.5             textshaping_0.4.0       rprojroot_2.0.4        \n[64] vroom_1.6.5             evaluate_1.0.1          shiny_1.9.1            \n[67] kableExtra_1.4.0        markdown_1.13           gridtext_0.1.5         \n[70] snakecase_0.11.1        fontLiberation_0.1.0    httpuv_1.6.15          \n[73] hrbrthemes_0.8.7        Rcpp_1.0.13             svglite_2.1.3          \n[76] gridExtra_2.3           Rttf2pt1_1.3.12         xfun_0.48              \n[79] pkgconfig_2.0.3        \n```\n\n\n:::\n:::\n\n\n\n:::\n\n# 9. Github Repository \n\n::: {.callout-tip collapse=\"true\"}\n\n##### Expand for GitHub Repo\n \n[Access the GitHub repository here](https://github.com/mrafa3/mrafa3.github.io)\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}