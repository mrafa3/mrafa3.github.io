{
  "hash": "d101a53df32da8cb60d5bc81c3477317",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Animating the Gapminder dataset using gganimate\"\ndescription: \"This post outlines how to easily add animation to ggplot graphics\"\nauthor:\n  - name: Mickey Rafa\n    url: https://mrafa3.github.io/\n    #orcid: 0000-0002-5300-3075\ndate: 10-15-2017\ncategories: [R, data-viz, tidyverse, gganimate] # self-defined categories\n#citation: \n # url: https://mrafa3.github.io/posts/2024-07-15-wikipedia-international-mens-soccer/ \n#image: model_fit_plot.png\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n\n# Introduction\n\n## Purpose\nIn this project, I wanted to experiment with `gganimate::` to reproduce the classic animated visualization by Hans Rosling of Gapminder data.\n\n## Dataset\nThe Gapminder dataset, compiled by the Gapminder Foundation, provides data on global development trends, including indicators like life expectancy, GDP per capita, and population. The dataset is known for its use in dynamic visualizations that illustrate changes in global indicators over time.\n\n## Setup\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n        country        continent        year         lifeExp     \n Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.60  \n Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.20  \n Algeria    :  12   Asia    :396   Median :1980   Median :60.71  \n Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.47  \n Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.85  \n Australia  :  12                  Max.   :2007   Max.   :82.60  \n (Other)    :1632                                                \n      pop              gdpPercap       \n Min.   :6.001e+04   Min.   :   241.2  \n 1st Qu.:2.794e+06   1st Qu.:  1202.1  \n Median :7.024e+06   Median :  3531.8  \n Mean   :2.960e+07   Mean   :  7215.3  \n 3rd Qu.:1.959e+07   3rd Qu.:  9325.5  \n Max.   :1.319e+09   Max.   :113523.1  \n                                       \n```\n\n\n:::\n:::\n\n\nIn this graphic, I want to spotlight China's development path, and also show the story of differences by continent. First, I'll show all the data, which makes clear the need for animation of this data.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngapminder %>% \n  ggplot(.,\n         aes(x=gdpPercap,\n             y=lifeExp,\n             size=pop,\n             color=continent)) +\n  geom_point() + \n  geom_text(data=gapminder %>% filter(country == 'China'),\n                           aes(label=country), \n                           family='Arial', size= 3, color='black', nudge_y = 2) + \n  scale_x_log10() + \n  ggtitle('Change in life expectancy and income over time',\n          subtitle = 'Bubble size indicates population size') + \n  labs(x='GDP per capita (logged)\\n',\n       y='Life expectancy (years)',\n       caption='Source: Gapminder dataset') + \n  theme(legend.position = 'top',\n        legend.title = element_blank()) + \n  guides(size='none')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/fig1-1.png){fig-align='center' width=960}\n:::\n:::\n\n## gganimate::\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngapminder %>% \n  ggplot(.,\n         aes(x=gdpPercap,\n             y=lifeExp,\n             size=pop,\n             color=continent)) +\n  geom_point() + \n  geom_text(data=gapminder %>% filter(country == 'China'),\n                           aes(label=country), \n                           family='Arial', size= 3, color='black', nudge_y = 2) + \n  geom_text(aes(x=min(gdpPercap), \n                y=min(lifeExp),\n                label=as.factor(year)), \n            hjust=-3.5, vjust=-0.2, alpha=0.2, color='gray70', size=20) +\n  scale_x_log10() + \n  ggtitle('Change in life expectancy and income over time',\n          subtitle = 'Bubble size indicates population size') + \n  labs(x='GDP per capita (logged)\\n',\n       y='Life expectancy (years)',\n       caption='Source: Gapminder dataset') + \n  theme(legend.position = 'top') + \n  guides(size='none') + \n  my.theme + \n  transition_states(\n    year,\n    transition_length = 2,\n    state_length = 0,\n    wrap = TRUE\n  ) + \n  enter_fade() + \n  exit_shrink() +\n  ease_aes()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/gganimate-1.gif){fig-align='center'}\n:::\n:::\n\n\n## Using the gganimate::shadow_wake() function to leave a trail\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ngapminder %>% \n  ggplot(.,\n         aes(x=gdpPercap,\n             y=lifeExp,\n             size=pop,\n             color=continent)) +\n  geom_point() + \n  geom_text(data=gapminder %>% filter(country == 'China'),\n                           aes(label=country), \n                           family='Arial', size= 3, color='black', nudge_y = 2) + \n  geom_text(aes(x=min(gdpPercap), \n                y=min(lifeExp),\n                label=as.factor(year)), \n            hjust=-3.5, vjust=-0.2, alpha=0.2, color='gray70', size=20) +\n  scale_x_log10() + \n  ggtitle('Change in life expectancy and income over time',\n          subtitle = 'Bubble size indicates population size') + \n  labs(x='GDP per capita (logged)\\n',\n       y='Life expectancy (years)',\n       caption='Source: Gapminder dataset') + \n  theme(legend.position = 'top') + \n  guides(size='none') + \n  my.theme + \n  transition_states(\n    year,\n    transition_length = 2,\n    state_length = 0,\n    wrap = TRUE\n  ) + \n  shadow_wake(wake_length = 0.1, alpha = FALSE, exclude_layer = c(2,3)) + \n  enter_fade() + \n  exit_shrink() +\n  ease_aes()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/gganimate2-1.gif){fig-align='center'}\n:::\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}